/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e){if(typeof define=="function"&&define.amd)define(e);else{var t=e(),n=t.core.deps.globals;n.tmlib=t,n.__=t}})(function(){var e,t,n;return function(r){function d(e,t){return h.call(e,t)}function v(e,t){var n,r,i,s,o,u,a,f,c,h,p=t&&t.split("/"),d=l.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(f=0;f<e.length;f+=1){h=e[f];if(h===".")e.splice(f,1),f-=1;else if(h===".."){if(f===1&&(e[2]===".."||e[0]===".."))break;f>0&&(e.splice(f-1,2),f-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(f=n.length;f>0;f-=1){r=n.slice(0,f).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=f;break}}}if(s)break;!u&&v&&v[r]&&(u=v[r],a=f)}!s&&u&&(s=u,o=a),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function m(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function g(e){return function(t){return v(t,e)}}function y(e){return function(t){a[e]=t}}function b(e){if(d(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!d(a,e)&&!d(c,e))throw new Error("No "+e);return a[e]}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice;o=function(e,t){var n,r=w(e),i=r[0];return e=r[1],i&&(i=v(i,t),n=b(i)),i?n&&n.normalize?e=n.normalize(e,g(t)):e=v(e,t):(e=v(e,t),r=w(e),i=r[0],e=r[1],i&&(n=b(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return m(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:E(e)}}},i=function(e,t,n,i){var s,l,h,p,v,g=[],w;i=i||e;if(typeof n=="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(v=0;v<t.length;v+=1){p=o(t[v],i),l=p.f;if(l==="require")g[v]=u.require(e);else if(l==="exports")g[v]=u.exports(e),w=!0;else if(l==="module")s=g[v]=u.module(e);else if(d(a,l)||d(f,l)||d(c,l))g[v]=b(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,m(i,!0),y(l),{}),g[v]=a[l]}}h=n.apply(a[e],g);if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!w)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){return typeof e=="string"?u[e]?u[e](t):b(o(e,t).f):(e.splice||(l=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s)},s.config=function(e){return l=e,l.deps&&s(l.deps,l.callback),s},n=function(e,t,n){t.splice||(n=t,t=[]),!d(a,e)&&!d(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("../vendor/almond.js",function(){}),n("tmlib/core/deps",[],function(){var e=this.TMLIB_CONFIG&&typeof this.TMLIB_CONFIG.deps=="object"?this.TMLIB_CONFIG.deps:{},t,n;e.globals||(e.globals=Function("return this")());var r=Array("__","tmlib","console","Array","Object","undefined","head","jQuery"),i=r.length;for(t=0;t<i;++t){var s=r[t];e[s]||(e[s]=e.globals[s]||n)}return e}),n("tmlib/core/mergeInto",[],function(){var e=function(){var t=arguments,n=t[0];for(var r=1;r<t.length;++r)for(var i in t[r])t[r].hasOwnProperty(i)&&(n[i]=t[r][i]);return n};return e}),n("tmlib/core/Namespace",["./deps","./mergeInto"],function(e,t){var n=e.globals,r=function(){var t=arguments,n=!1;if(!t.length||this instanceof r&&typeof this.__._this=="undefined")n=!0;if(!n)return t.length?r.namespace.apply(this,t):new r;this.__._this=this};return t(r,{helpers:{keys:function(){var e,t=[];for(e in this)e!=="__"&&t.push(e);return t}},namespace:function(){var e=arguments,i,s,o,u;switch(e.length){case 0:return new r;case 1:s=e[0];break;case 2:typeof e[0]=="string"?(s=e[0],o=e[1]):(u=e[0],typeof e[1]=="string"?s=e[1]:o=e[1]);break;case 3:u=e[0],s=e[1],o=e[2]}u||(u=n);var a=u;if(typeof s=="string"){var f,l=s.split(r.separator);for(i=0;i<l.length;++i)f=l[i],a[f]||(a[f]=new r),a=a[f]}if(o)if(o instanceof Array)for(i=0;i<o.length;++i)r(o[i],a);else t(a,o);return a},separator:"."}),r.prototype.__=function(){var e=arguments;if(e.length===0)return r.helpers.keys.apply(this);var n=e[0];switch(typeof n){case"string":if(n.charAt(0)===r.separator){var i=n.substring(1),s=e[1]||null;return r(this,i,s)}if(typeof r.helpers[n]=="function")return e.shift(),r.helpers.apply(this,e);if(typeof r.helpers[n]!="undefined")return r.helpers[n];throw'Namespace: undefined method "'+n+'"';case"object":return t(this,n)}},r}),n("tmlib/core/TMLib",["./deps","./mergeInto","./Namespace"],function(e,t,n){var r=e.Array,i=e.globals,s=function(){if(!(this instanceof s))return new s;this.__._this=this},o=function(){var e=arguments,t=e[0],i=null;switch(typeof o[t]){case"function":r.prototype.shift.call(e),i=o[t].apply(this,e);break;case"undefined":var u=t&&t.charAt(0)===n.separator?s.prototype:this;i=n.prototype.__.apply(u,e);break;default:i=o[t]}return i};return t(o,{noConflict:function(t){return i.__=e.__,t&&(i.tmlib=e.tmlib),this._this||this}}),s.prototype.__=o,s}),n("tmlib/core/__",["./deps","./Namespace","./TMLib"],function(e,t,n){var r=new n;return r.__(".core",{deps:e,Namespace:t,TMLib:n}),r}),n("tmlib/core/Library",["./__","./deps","./mergeInto","./Namespace"],function(e,t,n,r){var i=t.undefined,s=t.Array,o=function(t){if(!(this instanceof o))return new o(t);var n=arguments;this.__._this=this,this.__.apply(this,n)},u=function(){var e=arguments,t=e[0],n=null;switch(typeof t){case"object":u.extend.apply(this,e);break;default:switch(typeof u[t]){case"function":s.prototype.shift.call(e),n=u[t].apply(this,e);break;case"undefined":n=r.prototype.__.apply(this,e);break;default:n=u[t]}}return n};return n(u,{extend:function(){var e=arguments,t=e[0],r,s=this._this||this;switch(typeof t){case"object":var o=e.length;for(r=0;r<o;++r)n(s,e[r]);break;case"string":s[t]=e[1]||i}return s}}),o.prototype.__=u,e.__(".core",{Library:o}),o}),n("tmlib/core/functions",["./__","./deps","./Library"],function(e,t,n){var r=t.Array,i=t.undefined,s=new n({configuration:{argumentsRegex:/((?!=^|,)([\w\$_]))+/g,duckPunchKey:"__original",functionRegex:/^function[\s]+[\w]*\(([\w\s,_\$]*)?\)\{(.*)\}$/},clone:function(e){var t,n=e.toString().match(this.configuration.functionRegex);n?(n[1]?t=n[1].match(this.configuration.argumentsRegex):t=[],t.push(n[2])):t=[];var r=Function.apply(Function,t);for(var i in e)r[i]=e[i];return r},contains:/define/.test(function(){"define";})?function(e,t){return t instanceof RegExp||(t=new RegExp(t,"i")),t.test(e)}:function(){return!0},duckPunch:function(e,t,n){n=n||{},n.autoApply=n.autoApply||!1;var s=n.autoApply?function(t){return e.apply(this,t)}:e;switch(n.type||null){case"this":var o=n.key||this.configuration.duckPunchKey;return function(){var e=this[o]||i;this[o]=s;var n=t.apply(this,arguments);return e===i?delete this[o]:this[o]=e,n};default:return function(){return r.prototype.unshift.call(arguments,s),t.apply(this,arguments)}}}});return e.__(".core",{functions:s}),s}),n("tmlib/core/objects",["./deps","./Library","./mergeInto","./__"],function(e,t,n,r){var i=e.Array,s=e.undefined,o=new t({addProperties:function(e,t){for(var n in t)t.hasOwnProperty(n)&&this.addProperty(e,n,t[n])},addProperty:function(e,t,n){typeof n=="object"&&typeof n.init!="undefined"?e[t]=n.init:e[t]=n},getLength:function(e,t){t===s&&(t=!1);var n=0;for(var r in e)(e.hasOwnProperty(r)||t)&&++n;return n},hasKey:function(e,t){return __.lib.isArray(e)||(e=[e]),__.lib.each(e,function(e){if(t.hasOwnProperty(e))return!0}),!1},hasKeys:function(e,t){var n=!0;return __.lib.isArray(e)||(e=[e]),__.lib.each(e,function(e){if(!n||!t.hasOwnProperty(e))n=!1}),n},merge:function(){var e=arguments,t={};return i.prototype.unshift.call(e,t),n(e)},mergeInto:n});return r.__(".core",{objects:o}),o}),n("tmlib/core/classes",["./deps","./functions","./Library","./mergeInto","./objects","./__"],function(e,t,n,r,i,s){var o=e.Array,u=e.globals,a=e.jQuery,f=e.Object,l=new n({configuration:{autoApplyForFunctionInheritance:!0,overriddenParentKey:"__base"},creationPlugins:{addParentAccessToMethods:function(e){var n=e.parent,r=e.prototype;e=e.options;var s=typeof e.properties=="object"?i.merge(e.properties):{};typeof e.init!="undefined"&&(s.init=e.init);for(var o in s)typeof r[o]=="function"&&typeof n.prototype[o]=="function"&&t.contains(r[o],"\\b"+this.configuration.overriddenParentKey+"(\\(|\\.apply|\\.call)\\b")&&(r[o]=t.duckPunch(n.prototype[o],r[o],{autoApply:this.configuration.autoApplyForFunctionInheritance,key:this.configuration.overriddenParentKey,name:o,type:"this"}))}},create:function(e){typeof e=="undefined"&&(e={});var t;switch(typeof e.parent){case"string":t=u[e.parent];break;case"function":case"object":t=e.parent;break;default:typeof s.core.BaseClass!="undefined"?t=s.core.BaseClass:t=f}var n=this.createConstructor(t),o=this.createPrototype(t);r(n,t),typeof e.statics=="object"&&(n=r(n,e.statics)),this.mixIn(e,o,n),typeof e.init=="function"&&i.addProperty(o,"init",e.init);for(var a in this.creationPlugins)this.creationPlugins.hasOwnProperty(a)&&this.creationPlugins[a].call(this,{"class":n,parent:t,prototype:o,options:e});return n.prototype=o,n.prototype.constructor=n,e.name&&(u[e.name]=n),n},createConstructor:function(e){return function(){if(!l.__isCreatingPrototype)switch(typeof this.init){case"function":this.init.apply(this,arguments);break;case"undefined":e.apply(this,arguments)}}},createPrototype:function(e){this.__isCreatingPrototype=!0;var t=new e;return this.__isCreatingPrototype=!1,t},mixIn:function(e,t,n){var r;if(typeof e=="object")if(e instanceof o)for(var i=0,s=e.length;i<s;++i)this.mixIn(e[i],t,n);else{typeof e.preMixins=="object"&&this.mixIn(e.preMixins,t,n),typeof e.mixins=="object"&&this.mixIn(e.mixins,t,n);if(typeof e.statics=="object"&&typeof n=="function")for(r in e.statics)e.statics.hasOwnProperty(r)&&(n[r]=e.statics[r]);if(typeof e.properties=="object")for(r in e.properties)e.properties.hasOwnProperty(r)&&(t[r]=e.properties[r]);typeof e.postMixins=="object"&&this.mixIn(e.postMixins,t,n)}},pluginize:function(e){var t=e.type||"method";e=r({mapToThis:"elements"},e);var n=function(){var t=arguments;if(typeof n.instance!="undefined"&&typeof t[0]!="undefined"){if(typeof t[0]=="string"){var r=o.prototype.shift.call(t);return typeof n.instance[r]=="function"?n.instance[r].apply(n.instance,t):n.instance[r]}throw new Error("Must pass name of function to call for plugin.")}switch(typeof e.mapToThis){case"string":typeof t[0]!="object"&&(t[0]={}),t[0][e.mapToThis]=this;break;case"number":t[e.mapToThis]=this;break;default:throw new Error('Pluginize does not support a "mapToThis" type of '+typeof e.mapToThis)}typeof e.object=="object"?n.instance=e.object:n.instance=new e["class"](t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9])};switch(t){case"method":return n;case"jQuery":a.fn[e.name]=n;break;default:throw new Error("Pluginize doesn't support type "+t)}}});return s.__(".core",{classes:l}),l}),n("tmlib/core/BaseClass",["./classes","./__"],function(e,t){var n=e.create({init:function(e){e=e||{};for(var t in e)e.hasOwnProperty(t)&&this.__directSet(t,e[t])},properties:{__directSet:function(e,t){this[e]=t}}});return t.__(".core",{BaseClass:n}),n}),n("requirements.base",["tmlib/core/__","tmlib/core/functions","tmlib/core/objects","tmlib/core/classes","tmlib/core/BaseClass"],function(){}),t("requirements.base"),t("tmlib/core/__")});