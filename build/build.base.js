/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e){if(typeof define=="function"&&define.amd)define("tmlib",e);else{var t=e(),n=t.core.deps.globals;n.tmlib=t,n.__=t}})(function(){var e,t,n;return function(r){function d(e,t){return h.call(e,t)}function v(e,t){var n,r,i,s,o,u,a,f,c,h,p=t&&t.split("/"),d=l.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(f=0;f<e.length;f+=1){h=e[f];if(h===".")e.splice(f,1),f-=1;else if(h===".."){if(f===1&&(e[2]===".."||e[0]===".."))break;f>0&&(e.splice(f-1,2),f-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(f=n.length;f>0;f-=1){r=n.slice(0,f).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=f;break}}}if(s)break;!u&&v&&v[r]&&(u=v[r],a=f)}!s&&u&&(s=u,o=a),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function m(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function g(e){return function(t){return v(t,e)}}function y(e){return function(t){a[e]=t}}function b(e){if(d(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!d(a,e)&&!d(c,e))throw new Error("No "+e);return a[e]}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice;o=function(e,t){var n,r=w(e),i=r[0];return e=r[1],i&&(i=v(i,t),n=b(i)),i?n&&n.normalize?e=n.normalize(e,g(t)):e=v(e,t):(e=v(e,t),r=w(e),i=r[0],e=r[1],i&&(n=b(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return m(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:E(e)}}},i=function(e,t,n,i){var s,l,h,p,v,g=[],w;i=i||e;if(typeof n=="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(v=0;v<t.length;v+=1){p=o(t[v],i),l=p.f;if(l==="require")g[v]=u.require(e);else if(l==="exports")g[v]=u.exports(e),w=!0;else if(l==="module")s=g[v]=u.module(e);else if(d(a,l)||d(f,l)||d(c,l))g[v]=b(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,m(i,!0),y(l),{}),g[v]=a[l]}}h=n.apply(a[e],g);if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!w)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){return typeof e=="string"?u[e]?u[e](t):b(o(e,t).f):(e.splice||(l=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s)},s.config=function(e){return l=e,l.deps&&s(l.deps,l.callback),s},n=function(e,t,n){t.splice||(n=t,t=[]),!d(a,e)&&!d(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("../vendor/almond.js",function(){}),n("tmclasses/core",["module"],function(e,t){var n=e.config(),r=n.globals||this,i=n.Array||r.Array,s=n.Object||r.Object,o=n.doAutoApply||!0,u=n.parentName||"__parent",a=n.addProperty?n.addProperty:function(e,t,n){typeof n=="object"&&typeof n.init!="undefined"?e[t]=n.init:e[t]=n},f;n.contains?f=n.contains:/define/.test(function(){"define";})?f=function(e,t){return t instanceof RegExp||(t=new RegExp(t,"i")),t.test(e)}:f=function(){return!0};var l=n.duckPunch?n.duckPunch:function(n,r,s){s=s||{},s.autoApply=s.autoApply||!1;var o=s.autoApply?function(e){return n.apply(this,e)}:n;switch(s.type||null){case"this":var u=s.key||this.config.duckPunchKey;return function(){var e=this[u]||t;this[u]=o;var n=r.apply(this,arguments);return e===t?delete this[u]:this[u]=e,n};default:return function(){return i.prototype.unshift.call(arguments,o),r.apply(this,arguments)}}},c=n.mergeInto?n.mergeInto:function(){var t=arguments,n=t[0];for(var r=1;r<t.length;++r)for(var i in t[r])t[r].hasOwnProperty(i)&&(n[i]=t[r][i]);return n},h={addParentAccessToMethods:function(e){var t=e.parent,n=e.prototype;e=e.options;var r={};typeof e.properties=="object"&&c(r,e.properties),typeof e.init!="undefined"&&(r.init=e.init);for(var i in r)typeof n[i]=="function"&&typeof t.prototype[i]=="function"&&f(n[i],"\\b"+u+"(\\(|\\.apply|\\.call)\\b")&&(n[i]=l(t.prototype[i],n[i],{autoApply:o,key:u,name:i,type:"this"}))}};n.creationPlugins&&c(h,n.creationPlugins);var p={config:n,creationPlugins:h,create:function(e){typeof e=="undefined"&&(e={});var t;switch(typeof e.parent){case"string":t=r[e.parent];break;case"function":case"object":t=e.parent;break;default:p.BaseClass?t=p.BaseClass:t=s}var n=this.createConstructor(t),i=this.createPrototype(t);c(n,t),typeof e.statics=="object"&&(n=c(n,e.statics)),this.mixIn(e,i,n),typeof e.init=="function"&&a(i,"init",e.init);for(var o in h)h.hasOwnProperty(o)&&h[o].call(this,{Class:n,parent:t,prototype:i,options:e});return n.prototype=i,n.prototype.constructor=n,e.name&&(r[e.name]=n),n},createConstructor:function(e){var t=this,n=function(){if(!(this instanceof n)){var i=t.createPrototype(n);return i.init&&i.init.apply&&i.init.apply(i,arguments),i}switch(typeof this.init){case"function":this.init.apply(this,arguments);break;case"undefined":e.apply(this,arguments)}};return n},createPrototype:function(e){var t=function(){};t.prototype=e.prototype;var n=new t;return n},mixIn:function(e,t,n){var r,s,o;if(typeof e=="object")if(e instanceof i)for(r=0,o=e.length;r<o;++r)this.mixIn(e[r],t,n);else{typeof e.preMixins=="object"&&this.mixIn(e.preMixins,t,n),typeof e.mixins=="object"&&this.mixIn(e.mixins,t,n);if(typeof e.statics=="object"&&typeof n=="function")for(s in e.statics)e.statics.hasOwnProperty(s)&&(n[s]=e.statics[s]);if(typeof e.properties=="object")for(s in e.properties)e.properties.hasOwnProperty(s)&&(t[s]=e.properties[s]);typeof e.postMixins=="object"&&this.mixIn(e.postMixins,t,n)}},addProperty:a,duckPunch:l,mergeInto:c};return p}),n("tmclasses/BaseClass",["./core"],function(e){var t=e.create({init:function(e){e=e||{},this.isInited&&this.deInit();for(var t in e)e.hasOwnProperty(t)&&this.__directSet(t,e[t]);this.isInited=!0,this.hasInited=!0},properties:{__directSet:function(e,t){this[e]=t},deInit:function(){this.isInited=!1},hasInited:!1,isInited:!1},statics:{create:function(){return this.apply(this,arguments)}}});return t}),n("tmclasses/tmclasses",["./core","./BaseClass"],function(e,t){return e.BaseClass=t,e}),n("tmlib/core/deps",["module"],function(e){var t=e.config(),n,r;t.globals||(t.globals=Function("return this")());var i=Array("__","tmlib","console","Array","Object","undefined","head","jQuery"),s=i.length;for(n=0;n<s;++n){var o=i[n];t[o]||(t[o]=t.globals[o]||r)}return t}),n("tmlib/core/mergeInto",[],function(){var e=function(){var t=arguments,n=t[0];for(var r=1;r<t.length;++r)for(var i in t[r])t[r].hasOwnProperty(i)&&(n[i]=t[r][i]);return n};return e}),n("tmlib/core/Namespace",["./deps","./mergeInto"],function(e,t){var n=e.globals,r=function(){var t=arguments,n=!1;if(!t.length||this instanceof r&&typeof this.__._this=="undefined")n=!0;if(!n)return t.length?r.namespace.apply(this,t):new r;this.__._this=this};return t(r,{helpers:{keys:function(){var e,t=[];for(e in this)e!=="__"&&t.push(e);return t}},namespace:function(){var e=arguments,i,s,o,u;switch(e.length){case 0:return new r;case 1:s=e[0];break;case 2:typeof e[0]=="string"?(s=e[0],o=e[1]):(u=e[0],typeof e[1]=="string"?s=e[1]:o=e[1]);break;case 3:u=e[0],s=e[1],o=e[2]}u||(u=n);var a=u;if(typeof s=="string"){var f,l=s.split(r.separator);for(i=0;i<l.length;++i)f=l[i],a[f]||(a[f]=new r),a=a[f]}if(o)if(o instanceof Array)for(i=0;i<o.length;++i)r(o[i],a);else t(a,o);return a},separator:"."}),r.prototype.__=function(){var e=arguments;if(e.length===0)return r.helpers.keys.apply(this);var n=e[0];switch(typeof n){case"string":if(n.charAt(0)===r.separator){var i=n.substring(1),s=e[1]||null;return r(this,i,s)}if(typeof r.helpers[n]=="function")return e.shift(),r.helpers.apply(this,e);if(typeof r.helpers[n]!="undefined")return r.helpers[n];throw'Namespace: undefined method "'+n+'"';case"object":return t(this,n)}},r}),n("tmlib/core/TMLib",["./deps","./mergeInto","./Namespace"],function(e,t,n){var r=e.Array,i=e.globals,s=function(){if(!(this instanceof s))return new s;this.__._this=this},o=function(){var e=arguments,t=e[0],i=null;switch(typeof o[t]){case"function":r.prototype.shift.call(e),i=o[t].apply(this,e);break;case"undefined":var u=t&&t.charAt(0)===n.separator?s.prototype:this;i=n.prototype.__.apply(u,e);break;default:i=o[t]}return i};return t(o,{noConflict:function(t){return i.__=e.__,t&&(i.tmlib=e.tmlib),this._this||this}}),s.prototype.__=o,s}),n("tmlib/core/__",["./deps","./Namespace","./TMLib"],function(e,t,n){var r=new n;return r.__(".core",{deps:e,Namespace:t,TMLib:n}),r}),n("tmlib/core/Library",["./__","./deps","./mergeInto","./Namespace"],function(e,t,n,r){var i=t.undefined,s=t.Array,o=function(t){if(!(this instanceof o))return new o(t);var n=arguments;this.__._this=this,this.__.apply(this,n)},u=function(){var e=arguments,t=e[0],n=null;switch(typeof t){case"object":u.extend.apply(this,e);break;default:switch(typeof u[t]){case"function":s.prototype.shift.call(e),n=u[t].apply(this,e);break;case"undefined":n=r.prototype.__.apply(this,e);break;default:n=u[t]}}return n};return n(u,{extend:function(){var e=arguments,t=e[0],r,s=this._this||this;switch(typeof t){case"object":var o=e.length;for(r=0;r<o;++r)n(s,e[r]);break;case"string":s[t]=e[1]||i}return s}}),o.prototype.__=u,e.__(".core",{Library:o}),o}),n("tmlib/core/functions",["./__","./deps","./Library"],function(e,t,n){var r=t.Array,i=t.undefined,s=new n({config:{argumentsRegex:/((?!=^|,)([\w\$_]))+/g,duckPunchKey:"__original",functionRegex:/^function[\s]+[\w]*\(([\w\s,_\$]*)?\)\{(.*)\}$/},clone:function(e){var t,n=e.toString().match(this.config.functionRegex);n?(n[1]?t=n[1].match(this.config.argumentsRegex):t=[],t.push(n[2])):t=[];var r=Function.apply(Function,t);for(var i in e)r[i]=e[i];return r},contains:/define/.test(function(){"define";})?function(e,t){return t instanceof RegExp||(t=new RegExp(t,"i")),t.test(e)}:function(){return!0},duckPunch:function(e,t,n){n=n||{},n.autoApply=n.autoApply||!1;var s=n.autoApply?function(t){return e.apply(this,t)}:e;switch(n.type||null){case"this":var o=n.key||this.config.duckPunchKey;return function(){var e=this[o]||i;this[o]=s;var n=t.apply(this,arguments);return e===i?delete this[o]:this[o]=e,n};default:return function(){return r.prototype.unshift.call(arguments,s),t.apply(this,arguments)}}}});return e.__(".core",{functions:s}),s}),n("tmlib/core/objects",["./deps","./Library","./mergeInto","tmclasses/tmclasses","./__"],function(e,t,n,r,i){var s=e.Array,o=e.undefined,u=new t({addProperties:function(e,t){for(var n in t)t.hasOwnProperty(n)&&this.addProperty(e,n,t[n])},addProperty:r.addProperty,getLength:function(e,t){t===o&&(t=!1);var n=0;for(var r in e)(e.hasOwnProperty(r)||t)&&++n;return n},hasKey:function(e,t){return i.lib.isArray(e)||(e=[e]),i.lib.each(e,function(e){if(t.hasOwnProperty(e))return!0}),!1},hasKeys:function(e,t){var n=!0;return i.lib.isArray(e)||(e=[e]),i.lib.each(e,function(e){if(!n||!t.hasOwnProperty(e))n=!1}),n},merge:function(){var e=arguments,t={};return s.prototype.unshift.call(e,t),n(e)},mergeInto:n});return i.__(".core",{objects:u}),u}),n("tmlib/core/classes",["./deps","./Library","./mergeInto","tmclasses/tmclasses","./__"],function(e,t,n,r,i){var s=e.Array,o=e.jQuery,u=new t({config:r.config,creationPlugins:r.creationPlugins,create:r.create,createConstructor:r.createConstructor,createPrototype:r.createPrototype,mixIn:r.mixIn,pluginize:function(e){var t=e.type||"method";e=n({mapToThis:"elements"},e);var r=function(){var t=arguments;if(typeof r.instance!="undefined"&&typeof t[0]!="undefined"){if(typeof t[0]=="string"){var n=s.prototype.shift.call(t);return typeof r.instance[n]=="function"?r.instance[n].apply(r.instance,t):r.instance[n]}throw new Error("Must pass name of function to call for plugin.")}switch(typeof e.mapToThis){case"string":typeof t[0]!="object"&&(t[0]={}),t[0][e.mapToThis]=this;break;case"number":t[e.mapToThis]=this;break;default:throw new Error('Pluginize does not support a "mapToThis" type of '+typeof e.mapToThis)}typeof e.object=="object"?r.instance=e.object:r.instance=new e.Class(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9])};switch(t){case"method":return r;case"jQuery":o.fn[e.name]=r;break;default:throw new Error("Pluginize doesn't support type "+t)}}});return i.__(".core",{classes:u}),u}),n("tmlib/core/BaseClass",["tmclasses/BaseClass","./__"],function(e,t){return t.__(".core",{BaseClass:e}),e}),n("requirements.base",["tmclasses/tmclasses","tmlib/core/__","tmlib/core/functions","tmlib/core/objects","tmlib/core/classes","tmlib/core/BaseClass"],function(){}),t("requirements.base"),t("tmlib/core/__")});